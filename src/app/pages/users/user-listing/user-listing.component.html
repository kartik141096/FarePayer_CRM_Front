<div class="content-wrapper">
    <!-- Content -->
    <div class="container-xxl flex-grow-1 container-p-y">
        <div class="row">
            <h4 class="fw-bold col-md-10"><span class="text-muted fw-light">Users /</span> User Listing</h4>
            <a *ngIf="this.userRole =='ROLE_ADMIN' || this.userRole =='ROLE_SUPER_ADMIN' " routerLink="/add-user" class="btn btn-primary col-md-2">Add new User</a>
        </div>
        <div class="accordion mt-3 mb-3" id="accordionExample">
            <div class="card accordion-item">
                <h2 class="accordion-header" id="headingThree">
                    <button type="button" class="accordion-button collapsed" data-bs-toggle="collapse" data-bs-target="#accordionThree" aria-expanded="false" aria-controls="accordionThree">
                        <h4><strong>Apply Filters</strong></h4>
                    </button>
                </h2>
            <div id="accordionThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#accordionExample" >
                <div class="accordion-body">
                    <div class="row mb-2">
                        <div class="col-md-3">
                            <label for="defaultFormControlInput" class="form-label">Created From</label>
                            <input type="date" (change)="updateFilterData('created_from', created_from.value)" #created_from class="form-control" aria-describedby="defaultFormControlHelp" />
                        </div>
                        <div class="col-md-3">
                            <label for="defaultFormControlInput" class="form-label">Created To</label>
                            <input type="date" (change)="updateFilterData('created_to', created_to.value)" #created_to class="form-control" aria-describedby="defaultFormControlHelp" />
                        </div>
                        
                        <div class="col-md-2">
                            <label for="defaultFormControlInput" class="form-label">Search By ID</label>
                            <input type="text" placeholder="ID No." (change)="updateFilterData('id', search_by_id.value)" #search_by_id class="form-control" aria-describedby="defaultFormControlHelp" />
                        </div>
                        <div class="col-md-4">
                            <label for="defaultFormControlInput" class="form-label">Search By Name, Email, Mobile</label>
                            <input type="text" placeholder="Name, Email, Mobile" (change)="updateFilterData('search_by_name_email_mobile', search_by_name_email_mobile.value)" #search_by_name_email_mobile class="form-control" aria-describedby="defaultFormControlHelp" />
                        </div>
                        
                        
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <label for="defaultFormControlInput" class="form-label">Role</label>
                            <select class="form-select" (change)="updateFilterData('role', role.value)" #role>
                                <option value="">Select</option>
                                <option *ngFor="let role of roles" [value]="role.id">{{ role.role_name }}</option>
                            </select>
                        </div>
                        <div class="col-md-4">
                            <label for="defaultFormControlInput" class="form-label">type</label>
                            <select class="form-select" (change)="updateFilterData('type', type.value)" #type>
                                <option value="">Select</option>
                                <option value="B2B">B2B - Vaayutrip</option>
                                <option value="B2C">B2C - Farepayer</option>
                            </select>
                        </div>
                        <div class="col-md-4">
                            <label for="defaultFormControlInput" class="form-label">Clear All</label>
                            <button (click)="removeFilters()" class="form-control btn btn-danger"><strong>Remove Filters</strong></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="card mb-4">
        <div class="table-responsive text-nowrap">
            <table class="table table-hover text-center">
                <thead>
                    <tr>
                        <th>User ID</th>
                        <th>User Name</th>
                        <th>User Email</th>
                        <th>User Type</th>
                        <th>User Role</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody class="table-border-bottom-0">
                    <tr *ngFor="let user of users">
                        <td>
                            {{user.id}}
                        </td>
                        <td>
                            {{user.name}}
                        </td>
                        <td>
                            {{user.email}}
                        </td>
                        <td>
                            {{user.user_type}}
                        </td>
                        <td>
                            {{user.role.role_name}}
                        </td>
                        <td>
                            <a [routerLink]="['/user-details', user.id]" class="detail-btn btn">
                                <img src="https://icons.veryicon.com/png/o/miscellaneous/new-version-of-star-selected-icon/view-more.png" height="40" alt="">
                            </a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <nav aria-label="Page navigation">
        <ul class="pagination justify-content-center">
            <li class="page-item prev">
                <a class="page-link" (click)="this.pageChange('-')" href="javascript:void(0);"><i class="tf-icon bx bx-chevrons-left"></i></a>
            </li>
            
            <li *ngFor="let pageNum of [].constructor(lastPage); let i = index" 
                [class.active]="page === (i + 1)" 
                class="page-item">
                <a class="page-link" (click)="pageChange(i + 1)" href="javascript:void(0);">{{ i + 1 }}</a>
            </li>

            <li class="page-item next">
                <a class="page-link" (click)="this.pageChange('+')" href="javascript:void(0);"><i class="tf-icon bx bx-chevrons-right"></i></a>
            </li>
        </ul>
    </nav>
</div>