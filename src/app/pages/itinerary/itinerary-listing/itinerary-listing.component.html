<div class="content-wrapper">
    <!-- Content -->
    <div class="container-xxl flex-grow-1 container-p-y">
        <div class="row">
            <h4 class="fw-bold col-md-10"><span class="text-muted fw-light">Itinerary / </span>Itinerary Listing</h4>
            <a routerLink="/add-itinerary" class="btn btn-primary col-md-2">Add new Itinerary</a>
        </div>
        
        <div class="accordion mt-3 mb-3" id="accordionExample">
            <div class="card accordion-item">
                <h2 class="accordion-header" id="headingThree">
                    <button type="button" class="accordion-button collapsed" data-bs-toggle="collapse" data-bs-target="#accordionThree" aria-expanded="false" aria-controls="accordionThree">
                        <h4><strong>Apply Filters</strong></h4>
                    </button>
                </h2>
            <div id="accordionThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#accordionExample" >
                <div class="accordion-body">
                    <div class="row mb-2">
                        <div class="col-md-4">
                            <label for="defaultFormControlInput" class="form-label">Start Date</label>
                            <input type="date" (change)="updateFilterData('start_date', start_date.value)" #start_date class="form-control" id="defaultFormControlInput" aria-describedby="defaultFormControlHelp" />
                        </div>
                        <div class="col-md-4">
                            <label for="defaultFormControlInput" class="form-label">End Date</label>
                            <input type="date" (change)="updateFilterData('end_date', end_date.value)" #end_date class="form-control" id="defaultFormControlInput" aria-describedby="defaultFormControlHelp" />
                        </div>
                        <div class="col-md-4">
                            <label for="defaultFormControlInput" class="form-label">Search By Note</label>
                            <input type="text" placeholder="Notes" (change)="updateFilterData('note', note.value)" #note class="form-control" id="defaultFormControlInput" aria-describedby="defaultFormControlHelp" />
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-3">
                            <label for="defaultFormControlInput" class="form-label">Itinerary Name</label>
                            <input type="text" placeholder="Itinerary Name" (change)="updateFilterData('name', name.value)" #name class="form-control" id="defaultFormControlInput" aria-describedby="defaultFormControlHelp" />
                        </div>
                        <div class="col-md-3">
                            <label for="defaultFormControlInput" class="form-label">Destination</label>

                            <select class="form-select" (change)="updateFilterData('destination', destination.value)" #destination>
                                <option value="">All Destinations</option>
                                <option *ngFor="let destination of destinationList" value="{{destination.id}}">{{destination.name}} ({{destination.type}})</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <label for="defaultFormControlInput" class="form-label">Itinerary Type</label>
                            <select class="form-select" (change)="updateFilterData('type', type.value)" #type>
                                <option value="">All</option>
                                <option value="B2C">B2C - Farepayer</option>
                                <option value="B2B">B2B - Vaayutrip</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <label for="defaultFormControlInput" class="form-label">Clear All</label>
                            <button (click)="removeFilters()" class="form-control btn btn-danger"><strong>Remove Filters</strong></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="card mb-4 mt-4">
            <div class="table-responsive text-nowrap">
                <table class="table table-hover text-center">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Itinerary Details</th>
                            <th>Location</th>
                            <th>Dates</th>
                        </tr>
                    </thead>
                    <tbody class="table-border-bottom-0">
                        <tr *ngFor="let itinerary of itineraries" [routerLink]="['/edit-itinerary', itinerary.id]" class="lh-1">
                            <td>
                                <strong>{{itinerary.id}}</strong>
                            </td>
                            <td class="text-primary">
                                <p><strong class="text-secondary">Name : </strong>{{itinerary.name}}</p>
                                <p><strong class="text-secondary">Duration : </strong>{{itinerary.duration}}</p>
                            </td>
                            <td>
                                <span *ngFor="let destination of itinerary.destinations" class="badge bg-label-primary me-1">
                                    {{destination.name}}
                                </span>
                            </td>
                            <td>
                                <p><img src="assets/img/icons/custom/date.png" height=15 alt=""><Strong> Start Date : </Strong>{{dateFormat(itinerary.start_date)}}</p>
                                <p><img src="assets/img/icons/custom/date.png" height=15 alt=""><Strong> End Date : </Strong>{{dateFormat(itinerary.end_date)}}</p>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <nav aria-label="Page navigation">
            <ul class="pagination justify-content-center">
                <li class="page-item prev">
                    <a class="page-link" (click)="this.pageChange('-')" href="javascript:void(0);"><i class="tf-icon bx bx-chevrons-left"></i></a>
                </li>
                
                <li *ngFor="let pageNum of [].constructor(lastPage); let i = index" 
                    [class.active]="page === (i + 1)" 
                    class="page-item">
                    <a class="page-link" (click)="pageChange(i + 1)" href="javascript:void(0);">{{ i + 1 }}</a>
                </li>
    
                <li class="page-item next">
                    <a class="page-link" (click)="this.pageChange('+')" href="javascript:void(0);"><i class="tf-icon bx bx-chevrons-right"></i></a>
                </li>
            </ul>
        </nav>
    </div>