<div class="content-wrapper">
    <!-- Content -->
    <div class="container-xxl flex-grow-1 container-p-y">
        <div class="row">
            <h4 class="fw-bold col-md-10"><span class="text-muted fw-light">Queries /</span> Queries Listing</h4>
            <a routerLink="/add-query" class="btn btn-primary col-md-2">Add new Query</a>
        </div>
        <div class="accordion mt-3 mb-3" id="accordionExample">
            <div class="card accordion-item">
                <h2 class="accordion-header" id="headingThree">
                    <button type="button" class="accordion-button collapsed" data-bs-toggle="collapse" data-bs-target="#accordionThree" aria-expanded="false" aria-controls="accordionThree">
                        <h4><strong>Apply Filters</strong></h4>
                    </button>
                </h2>
            <div id="accordionThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#accordionExample" >
                <div class="accordion-body">
                    <div class="row mb-2">
                        <div class="col-md-2">
                            <label for="defaultFormControlInput" class="form-label">Created From</label>
                            <input type="date" (change)="updateFilterData('created_from', created_from.value)" #created_from class="form-control" id="defaultFormControlInput" aria-describedby="defaultFormControlHelp" />
                        </div>
                        <div class="col-md-2">
                            <label for="defaultFormControlInput" class="form-label">Created To</label>
                            <input type="date" (change)="updateFilterData('created_to', created_to.value)" #created_to class="form-control" id="defaultFormControlInput" aria-describedby="defaultFormControlHelp" />
                        </div>
                        <div class="col-md-2">
                            <label for="defaultFormControlInput" class="form-label">Update From</label>
                            <input type="date" (change)="updateFilterData('updated_from', updated_from.value)" #updated_from class="form-control" id="defaultFormControlInput" aria-describedby="defaultFormControlHelp" />
                        </div>
                        <div class="col-md-2">
                            <label for="defaultFormControlInput" class="form-label">Update To</label>
                            <input type="date" (change)="updateFilterData('updated_to', updated_to.value)" #updated_to class="form-control" id="defaultFormControlInput" aria-describedby="defaultFormControlHelp" />
                        </div>
                        <div class="col-md-2">
                            <label for="defaultFormControlInput" class="form-label">Search By ID</label>
                            <input type="text" (change)="updateFilterData('search_by_id', search_by_id.value)" #search_by_id class="form-control" id="defaultFormControlInput" aria-describedby="defaultFormControlHelp" />
                        </div>
                        <div class="col-md-2">
                            <label for="defaultFormControlInput" class="form-label">Status</label>
                            <select class="form-select" (change)="updateFilterData('status', status.value)" #status>
                                <option value="">All</option>
                                <option value="new">New</option>
                                <option value="interested">Interested</option>
                                <option value="hot">Hot</option>
                                <option value="not_interested">Not Interested</option>
                                <option value="converted">Converted</option>
                                <option value="closed">Closed</option>
                            </select>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-3">
                            <label for="defaultFormControlInput" class="form-label">Search By - Name, Email, Mobile</label>
                            <input type="text" (change)="updateFilterData('search_by_name_email_mobile', search_by_name_email_mobile.value)" #search_by_name_email_mobile class="form-control" id="defaultFormControlInput" aria-describedby="defaultFormControlHelp" />
                        </div>
                        <div class="col-md-3">
                            <label for="defaultFormControlInput" class="form-label">Destination</label>
                            <select class="form-select" (change)="updateFilterData('destination', destination.value)" #destination>
                                <option value="">All Destinations</option>
                                <option value="Dubai">Dubai</option>
                                <option value="Canada">Canada</option>
                                <option value="United Kingdom">United Kingdom</option>
                                <option value="Brazil">Brazil</option>
                                <option value="Thailand">Thailand</option>
                            </select>
                        </div>
                        <div class="col-md-2">
                            <label for="defaultFormControlInput" class="form-label">Assigned To</label>
                            <select class="form-select" (change)="updateFilterData('assigned_to', assigned_to.value)" #assigned_to>
                                <option value="">All</option>
                                <option value="John Doe">John Doe</option>
                                <option value="Kabir">Kabir</option>
                                <option value="Rohan">Rohan</option>
                                <option value="Priyanka">Priyanka</option>
                                <option value="Sonali">Sonali</option>
                                <option value="Ritika">Ritika</option>
                            </select>
                        </div>
                        <div class="col-md-2">
                            <label for="defaultFormControlInput" class="form-label">Source</label>
                            <select class="form-select" (change)="updateFilterData('source', source.value)" #source>
                                <option value="">All</option>
                                <option value="Facebook">Facebook</option>
                                <option value="Instagram">Instagram</option>
                                <option value="Advertisement">Advertisement</option> <!-- Note: Fixed spelling from "Advertisiment" -->
                                <option value="Networking">Networking</option>
                                <option value="Walk In">Walk In</option>
                            </select>
                        </div>
                        <div class="col-md-2">
                            <label for="defaultFormControlInput" class="form-label">Clear All</label>
                            <button (click)="removeFilters()" class="btn btn-danger"><strong>Remove Filters</strong></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="card mb-4">
        <div class="table-responsive text-nowrap">
            <table class="table table-hover text-center">
                <thead>
                    <tr>
                        <th>Query Details</th>
                        <th>Client Details</th>
                        <th>Tour Details</th>
                        <th>Created On</th>
                        <th>Last Update</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody class="table-border-bottom-0">
                    <tr *ngFor="let query of queries">
                        <td>
                            <strong>{{query.id}}</strong><br>
                            <p class="badge bg-label-primary me-1">{{query.status}}</p><br>
                            <span class="badge bg-label-danger me-1">{{query.source}}</span>
                        </td>
                        <td>
                            <strong>{{query.title}} {{query.name}}</strong>
                            <p>{{query.mobile}}</p>
                            <p>{{query.email}}</p>
                        </td>
                        <td>
                            <strong>{{query.destination}}</strong>
                            <p><img src="https://static-00.iconduck.com/assets.00/calendar-icon-1995x2048-tot17508.png" height=15 alt=""> {{query.from_date}} | {{query.to_date}}</p>
                            <p>{{query.adult_count}} Adult, {{query.child_count}} Child, {{query.infant_count}} Infant</p>
                        </td>
                        <td>{{query.created_on}}</td>
                        <td>{{query.updated_on}}</td>
                        <td>
                            <a href="" class="detail-btn btn">
                                <img src="https://icons.veryicon.com/png/o/miscellaneous/new-version-of-star-selected-icon/view-more.png" height="40" alt="">
                            </a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <nav aria-label="Page navigation">
        <ul class="pagination justify-content-center">
            <li class="page-item prev">
                <a class="page-link" (click)="this.pageChange('-')" href="javascript:void(0);"><i class="tf-icon bx bx-chevrons-left"></i></a>
            </li>
            
            <li *ngFor="let pageNum of [].constructor(lastPage); let i = index" 
                [class.active]="page === (i + 1)" 
                class="page-item">
                <a class="page-link" (click)="pageChange(i + 1)" href="javascript:void(0);">{{ i + 1 }}</a>
            </li>

            <li class="page-item next">
                <a class="page-link" (click)="this.pageChange('+')" href="javascript:void(0);"><i class="tf-icon bx bx-chevrons-right"></i></a>
            </li>
        </ul>
    </nav>
</div>